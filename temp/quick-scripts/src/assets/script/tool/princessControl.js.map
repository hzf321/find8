{"version":3,"sources":["assets/script/tool/princessControl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { princessSoundTool } from \"./princessSoundTool\";\r\nimport { princessResUtil } from \"./princessResUtil\";\r\n\r\n\r\nexport interface princess_Data {\r\n    centerPos: { x: number, y: number },            // 中心点坐标 \r\n    startPos: { x: number, y: number },             // 起始点坐标\r\n    endPos: { x: number, y: number },               // 结束点坐标\r\n    blockSize: { wid: number, hei: number },        // 方块大小\r\n    isFind: boolean,                                // 是否找到\r\n}\r\n\r\n\r\nclass princessControlClass  {\r\n\r\n    private static _instance: princessControlClass = null;\r\n\r\n    public static getInstance(): princessControlClass {\r\n        if (this._instance == null) {\r\n            this._instance = new princessControlClass();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    public sceneNode: cc.Node = null\r\n    public imgId: number = 0;\r\n\r\n\r\n    public princessSoundTool: princessSoundTool = new princessSoundTool();\r\n    public eventTarget: cc.EventTarget = new cc.EventTarget();\r\n    public princessResUtil = princessResUtil;\r\n\r\n\r\n    designWidth:number  = 1280;//设计分辨率宽\r\n    designHeight:number =  720;//设计分辨率高\r\n\r\n    isIpadFix:boolean = false;\r\n    isIphoneXSMaxFix:boolean = false;\r\n    iphoneXSMaxY:number = 0;\r\n\r\n    isLiuhaiFix:boolean = false;//是否有刘海\r\n    liuhaiY:number = 0;//刘海高度\r\n\r\n    setsceneNode(node: cc.Node) {\r\n        this.sceneNode = node;\r\n    }\r\n\r\n    getsceneNode() {\r\n        return this.sceneNode;\r\n    }\r\n\r\n\r\n    /**\r\n     * 时间转换，秒->分秒, mm:ss\r\n    */\r\n    timeChange(value) {\r\n        value = +value;\r\n        let minute: number = Math.floor(value / 60);\r\n        let second: number = Math.floor(value % 60);\r\n        let minStr: string = \"\"\r\n        if (minute < 10) {        //分钟\r\n            minStr = \"0\" + minute\r\n        } else {\r\n            minStr = minute.toString();\r\n        }\r\n        let secStr: string = \"\"\r\n        if (second < 10) {        //秒数\r\n            secStr = \"0\" + second\r\n        } else {\r\n            secStr = second.toString();\r\n        }\r\n        return `${minStr}:${secStr}`;\r\n    }\r\n\r\n\r\n    //返回范围的随机数\r\n    getRandomInt(min: number, max: number): number {\r\n        return Math.floor(Math.random() * (max - min + 0.999999999)) + min;\r\n    }\r\n\r\n    // 全屏窗口背景图适配\r\n    adapterBg(bgNode: cc.Node) {\r\n        //背景大图适配 等比缩放 不留黑边\r\n        let _bgWidthScale = cc.winSize.width / bgNode.width;\r\n        let _bgHeightScale = cc.winSize.height / bgNode.height;\r\n        bgNode.scale = Math.max(_bgWidthScale, _bgHeightScale);\r\n    }\r\n\r\n    //转成节点坐标\r\n    changePos(toNode: cc.Node, fromNode: cc.Node) {\r\n        if (!cc.isValid(toNode) || !cc.isValid(fromNode)) return cc.v3(0, 0);\r\n        let _pos = toNode.parent.convertToWorldSpaceAR(toNode.position);\r\n        let _npos = fromNode.parent.convertToNodeSpaceAR(_pos);\r\n        return _npos;\r\n    }\r\n\r\n\r\n    //------------------------------------------anim---------------------------------------------------------------\r\n    delayCallBack(time: number, _callback: any, nodeDelay?: cc.Node): void {\r\n        let CanvasNode = cc.director.getScene().getChildByName('Canvas');\r\n        if (cc.isValid(nodeDelay)) {\r\n            CanvasNode = nodeDelay;\r\n        }\r\n        // cc.Tween.stopAllByTarget(CanvasNode);//这里不能停止CanvasNode的所有动作\r\n        cc.tween(CanvasNode)\r\n            .delay(time)\r\n            .call(() => { if (_callback) _callback(); })\r\n            .start();\r\n    }\r\n\r\n    playSp(spSkel: sp.Skeleton, name: string, isLoop: boolean = false, endCallback: Function = null): void {\r\n        spSkel.setCompleteListener(() => {\r\n            if (endCallback) {\r\n                this.delayCallBack(0.02, () => {\r\n                    endCallback();\r\n                }, spSkel.node);\r\n            }\r\n            spSkel.setCompleteListener(null);\r\n            // spSkel.setDisposeListener(endCallback);\r\n        });\r\n        spSkel.setAnimation(0, name, isLoop);\r\n    }\r\n    stopSp(spSkel: sp.Skeleton): void {\r\n        spSkel.setCompleteListener(null);\r\n        // spSkel.clearTracks();\r\n    }\r\n\r\n    // 序列动画(添加一个动画到尾巴 还可以延迟几秒)\r\n    addSequenceSp(spSkel: sp.Skeleton, name: string, isLoop: boolean = false, delayTime?: number): void {\r\n        if (delayTime) {\r\n            spSkel.addAnimation(0, name, isLoop, delayTime);\r\n        } else {\r\n            spSkel.addAnimation(0, name, isLoop);\r\n        }\r\n    }\r\n}\r\n\r\nexport let princessControl = princessControlClass.getInstance();\r\n\r\n\r\n\r\nexport const delay = {\r\n    flask: \"flask\",               //游戏场景\r\n    glass: \"glass\",               //大厅\r\n    cup: \"cup\",                   //登录页\r\n}\r\n\r\nexport const dell = {\r\n    EmilyPop: \"EmilyPop\",                 //游戏结束\r\n    SophiaPop: \"SophiaPop\",               //时间到\r\n    AvaPop: \"AvaPop\",                     //退出 返回大厅\r\n    IsabellaPop: \"IsabellaPop\",           //设置\r\n    MiaPop: \"MiaPop\",                     //登录页隐私协议\r\n    AmeliaPop: \"AmeliaPop\",               //头像更改\r\n    EvelynPop: \"EvelynPop\",               //未解锁弹窗\r\n}   "]}