{"version":3,"sources":["assets/script/bright.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":[" \nimport { amuseStorage } from \"./tool/amuseStorage\";\nimport { strong, circle, amuseControl } from \"./tool/amuseControl\";\nimport { agData, storage } from \"./tool/amuseGameData\";\n\nconst { ccclass, property } = cc._decorator;\n \n@ccclass\nexport default class bright extends cc.Component {\n\n    @property(cc.Node)\n    loading_bg: cc.Node = null;\n\n    @property(cc.Node)\n    loading_bg2: cc.Node = null;\n \n    @property(cc.Node)\n    loadingBox: cc.Node = null;\n\n    @property(cc.Node)\n    gotoHallBox: cc.Node = null;\n\n    @property(cc.Node)\n    loading_play: cc.Node = null;\n\n    @property(cc.Node)\n    load_play: cc.Node = null;\n\n    private resNum = 6;\n    private nowNum = 0;\n\n    start() {\n        if (cc.sys.platform === cc.sys.IPAD) {\n            this.getComponent(cc.Canvas).fitHeight = false;\n            this.getComponent(cc.Canvas).fitWidth = true;\n        }\n        amuseControl.adapterBg(this.loading_bg);\n        amuseControl.adapterBg(this.loading_bg2);\n        amuseControl.amuseSoundTool.initBtnClickEffect();\n        amuseControl.amuseSoundTool.initbgmMusic();\n\n        let playroomStorage = amuseStorage.getStorageJSON(storage.gamedata);\n        if (playroomStorage) {\n            agData.userData = playroomStorage;\n        }\n\n        console.log( agData.userData, \" agData.userData\")\n        amuseControl.setsceneNode(this.node);\n\n        if (!agData.userData.isClause) {\n            this.gotoHallBox.active = false;\n            this.loadingBox.active = false;\n            amuseControl.amuseResUtil.showDialog(circle.YellowDialog, {\n                callback: () => {\n                    agData.userData.isClause = true;\n                    this.gotoHallBox.active = true;\n                    this.loadingBox.active = false;\n                    agData.storageData();\n                    cc.tween(this.loading_play).to(0.5, { scale: 1.1 }).to(0.5, { scale: 1 }).union().repeatForever().start();\n                }\n            });\n        } else {\n            this.gotoHallBox.active = true;\n            this.loadingBox.active = false;\n\n            cc.tween(this.loading_play).to(0.5, { scale: 1.1 }).to(0.5, { scale: 1 }).union().repeatForever().start();\n        }\n\n\n        agData.setVideoFailCb(()=>{\n            cc.resources.load(\"prefeb/toast\", cc.Prefab, (err, prefab) => {\n                if (err) {\n                    return;\n                }\n                \n                let toast = cc.instantiate(prefab);\n                amuseControl.amuseResUtil.bindResAsset(toast, prefab);\n                let parentNode = amuseControl.getsceneNode();\n                if (toast && parentNode) {\n                    toast.active = true;\n                    parentNode.addChild(toast);\n                    let toastLabel = toast.getChildByName(\"label\");\n                    toastLabel.getComponent(cc.Label).string = \"No ads at the moment\";\n                    cc.Tween.stopAllByTarget(toast);\n                    toast.opacity = 255;\n                    cc.tween(toast).to(0.15, { scale: 1.2 }).to(0.15, { scale: 1 }).delay(0.5).to(0.5, { opacity: 0 }).call(() => {\n                        toast.destroy();\n                    }).start();\n                }\n            })\n        });\n \n\n    }\n\n\n    onClick_gotoPlay() {\n        this.gotoHallBox.active = false;\n        this.loadingBox.active = true;\n        amuseControl.amuseSoundTool.commonBtnClick();\n\n        cc.tween(this.load_play).to(2, {angle: -360}).call(()=>{\n            this.load_play.angle = 0;\n        }).union().repeatForever().start();\n          \n        cc.loader.loadResDir(\"prefeb\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('prefeb assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"sunImg\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('sunImg assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"fightImg\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('fightImg assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"meinvImg\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            agData.levelAll = assets.length;\n            console.log('meinvImg assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n\n        cc.director.preloadScene(strong.sunset, (err, assets) => {\n            cc.log(\"game scene preloaded\");\n            this.progressBarEvent();\n        });\n        cc.director.preloadScene(strong.flower, (err, assets) => {\n            cc.log(\"hall scene preloaded\");\n            this.progressBarEvent();\n        });\n\n    }\n\n    progressBarEvent() {\n        this.nowNum++;\n        if (this.nowNum == this.resNum) {\n            this.scheduleOnce(() => {\n                if (agData.userData.isHall) {\n                    cc.director.loadScene(strong.flower);\n                } else {\n                    amuseControl.imgId = agData.userData.level;\n                    cc.director.loadScene(strong.sunset);\n                }\n            }, 0.05)\n        }\n    }\n\n\n    showShiPing() {\n        console.log(\"android---------------showShiPing------------------\")\n        agData.showVideo(()=>{\n            console.log(\"zzzzzzzzzzzzzzzzzzzzwwwwwwwwwwwwwwwwwwwwwwwwwwwww\");\n          })\n    }\n\n\n    showbanner() {\n        console.log(\"android---------------showbanner------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showbanner\", \"()V\");\n    }\n\n\n    hidebanner() {\n        console.log(\"android---------------hidebanner------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hidebanner\", \"()V\");\n    }\n}\n\n"]}