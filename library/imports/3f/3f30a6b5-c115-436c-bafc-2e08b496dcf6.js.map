{"version":3,"sources":["assets/script/cup.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":[" \nimport { princessStorage } from \"./tool/princessStorage\";\nimport { delay, dell, princessControl } from \"./tool/princessControl\";\nimport { pgData, storage } from \"./tool/princessGameData\";\n\nconst { ccclass, property } = cc._decorator;\n \n@ccclass\nexport default class cup extends cc.Component {\n\n    @property(cc.Node)\n    loading_bg: cc.Node = null;\n\n    @property(cc.Node)\n    loading_bg2: cc.Node = null;\n \n    @property(cc.Node)\n    loadingBox: cc.Node = null;\n\n    @property(cc.Node)\n    gotoHallBox: cc.Node = null;\n\n    @property(cc.Node)\n    loading_play: cc.Node = null;\n\n    @property(cc.Node)\n    load_play: cc.Node = null;\n\n    private resNum = 6;\n    private nowNum = 0;\n\n    start() {\n        if (cc.sys.platform === cc.sys.IPAD) {\n            this.getComponent(cc.Canvas).fitHeight = true;\n            this.getComponent(cc.Canvas).fitWidth = false;\n        }\n        princessControl.adapterBg(this.loading_bg);\n        princessControl.adapterBg(this.loading_bg2);\n        princessControl.princessSoundTool.initBtnClickEffect();\n        princessControl.princessSoundTool.initbgmMusic();\n\n        let playroomStorage = princessStorage.getStorageJSON(storage.gamedata);\n        if (playroomStorage) {\n            pgData.userData = playroomStorage;\n        }\n\n        console.log( pgData.userData, \" pgData.userData\")\n        princessControl.setsceneNode(this.node);\n\n        if (!pgData.userData.isClause) {\n            this.gotoHallBox.active = false;\n            this.loadingBox.active = false;\n            princessControl.princessResUtil.showDialog(dell.MiaPop, {\n                callback: () => {\n                    pgData.userData.isClause = true;\n                    this.gotoHallBox.active = true;\n                    this.loadingBox.active = false;\n                    pgData.storageData();\n                    cc.tween(this.loading_play).to(0.5, { scale: 1.1 }).to(0.5, { scale: 1 }).union().repeatForever().start();\n                }\n            });\n        } else {\n            this.gotoHallBox.active = true;\n            this.loadingBox.active = false;\n\n            cc.tween(this.loading_play).to(0.5, { scale: 1.1 }).to(0.5, { scale: 1 }).union().repeatForever().start();\n        }\n\n\n        pgData.setVideoFailCb(()=>{\n            cc.resources.load(\"prefeb/toast\", cc.Prefab, (err, prefab) => {\n                if (err) {\n                    return;\n                }\n                \n                let toast = cc.instantiate(prefab);\n                princessControl.princessResUtil.bindResAsset(toast, prefab);\n                let parentNode = princessControl.getsceneNode();\n                if (toast && parentNode) {\n                    toast.active = true;\n                    parentNode.addChild(toast);\n                    let toastLabel = toast.getChildByName(\"label\");\n                    toastLabel.getComponent(cc.Label).string = \"Sorry, no ads available at the moment. Please try again later!\";\n                    cc.Tween.stopAllByTarget(toast);\n                    toast.opacity = 255;\n                    cc.tween(toast).to(0.15, { scale: 1.2 }).to(0.15, { scale: 1 }).delay(0.5).to(0.5, { opacity: 0 }).call(() => {\n                        toast.destroy();\n                    }).start();\n                }\n            })\n        });\n \n\n    }\n\n\n    onClick_gotoPlay() {\n        this.gotoHallBox.active = false;\n        this.loadingBox.active = true;\n        princessControl.princessSoundTool.commonBtnClick();\n\n        cc.tween(this.load_play).to(2, {angle: -360}).call(()=>{\n            this.load_play.angle = 0;\n        }).union().repeatForever().start();\n          \n        cc.loader.loadResDir(\"prefeb\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('prefeb assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"openImg\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('openImg assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"strongImg\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('strongImg assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"familyData\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            pgData.levelAll = assets.length;\n            console.log('familyData assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n\n        cc.director.preloadScene(delay.flask, (err, assets) => {\n            cc.log(\"game scene preloaded\");\n            this.progressBarEvent();\n        });\n        cc.director.preloadScene(delay.glass, (err, assets) => {\n            cc.log(\"hall scene preloaded\");\n            this.progressBarEvent();\n        });\n\n    }\n\n    progressBarEvent() {\n        this.nowNum++;\n        if (this.nowNum == this.resNum) {\n            this.scheduleOnce(() => {\n                if (pgData.userData.isHall) {\n                    cc.director.loadScene(delay.glass);\n                } else {\n                    princessControl.imgId = pgData.userData.level;\n                    cc.director.loadScene(delay.flask);\n                }\n            }, 0.05)\n        }\n    }\n\n\n    showShiPing() {\n        console.log(\"android---------------showShiPing------------------\")\n        pgData.showVideo(()=>{\n            console.log(\"zzzzzzzzzzzzzzzzzzzzwwwwwwwwwwwwwwwwwwwwwwwwwwwww\");\n          })\n    }\n\n\n    showbanner() {\n        console.log(\"android---------------showbanner------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showbanner\", \"()V\");\n    }\n\n\n    hidebanner() {\n        console.log(\"android---------------hidebanner------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hidebanner\", \"()V\");\n    }\n}\n\n"]}